{"version":3,"sources":["../../../../src/features/commenting/hooks/useCommentOperations.ts"],"sourcesContent":["'use client'\n\nimport type { LexicalEditor, RangeSelection } from '@payloadcms/richtext-lexical/lexical'\n\nimport { useCallback } from 'react'\n\nimport type { CommentStore } from '../store.js'\nimport type { Comment, MarkNodeMapType, Thread } from '../types/core.js'\nimport type { CommentOperationsResult } from '../types/hooks.js'\n\nimport { commentOperations } from '../services/commentOperations.js'\n\n\n/**\n * Hook for handling comment operations\n * @param commentStore The comment store instance\n * @param editor The Lexical editor instance\n * @param markNodeMap Map of mark node keys to IDs\n * @param saveDocument Function to save the document\n * @returns Object with functions to handle comment operations\n */\nexport function useCommentOperations(\n  commentStore: CommentStore,\n  editor: LexicalEditor,\n  markNodeMap: MarkNodeMapType,\n  saveDocument: () => Promise<boolean | void>\n): CommentOperationsResult {\n  // Delete a comment or thread\n  const deleteCommentOrThread = useCallback(\n    (comment: Comment | Thread, thread?: Thread) => {\n      return commentOperations.deleteCommentOrThread(\n        commentStore,\n        editor,\n        markNodeMap,\n        comment,\n        thread,\n        saveDocument\n      )\n    },\n    [commentStore, editor, markNodeMap, saveDocument]\n  )\n\n  // Submit a new comment\n  const submitAddComment = useCallback(\n    (\n      commentOrThread: Comment | Thread,\n      isInlineComment: boolean,\n      thread?: Thread,\n      selection?: null | RangeSelection,\n    ) => {\n      return commentOperations.submitAddComment(\n        commentStore,\n        editor,\n        commentOrThread,\n        isInlineComment,\n        thread,\n        selection,\n        saveDocument\n      )\n    },\n    [commentStore, editor, saveDocument]\n  )\n\n  // Resolve or unresolve a thread\n  const resolveThread = useCallback(\n    (thread: Thread, resolved: boolean) => {\n      return commentOperations.resolveThread(\n        commentStore,\n        editor,\n        markNodeMap,\n        thread,\n        resolved,\n      )\n    },\n    [commentStore, editor, markNodeMap]\n  )\n\n  // Delete all comments\n  const deleteAllComments = useCallback(\n    () => {\n      return commentOperations.deleteAllComments(\n        commentStore,\n        editor,\n        markNodeMap,\n        saveDocument\n      )\n    },\n    [commentStore, editor, markNodeMap, saveDocument]\n  )\n\n  return {\n    deleteAllComments,\n    deleteCommentOrThread,\n    resolveThread,\n    submitAddComment,\n  }\n}\n"],"names":["useCallback","commentOperations","useCommentOperations","commentStore","editor","markNodeMap","saveDocument","deleteCommentOrThread","comment","thread","submitAddComment","commentOrThread","isInlineComment","selection","resolveThread","resolved","deleteAllComments"],"mappings":"AAAA;AAIA,SAASA,WAAW,QAAQ,QAAO;AAMnC,SAASC,iBAAiB,QAAQ,mCAAkC;AAGpE;;;;;;;CAOC,GACD,OAAO,SAASC,qBACdC,YAA0B,EAC1BC,MAAqB,EACrBC,WAA4B,EAC5BC,YAA2C;IAE3C,6BAA6B;IAC7B,MAAMC,wBAAwBP,YAC5B,CAACQ,SAA2BC;QAC1B,OAAOR,kBAAkBM,qBAAqB,CAC5CJ,cACAC,QACAC,aACAG,SACAC,QACAH;IAEJ,GACA;QAACH;QAAcC;QAAQC;QAAaC;KAAa;IAGnD,uBAAuB;IACvB,MAAMI,mBAAmBV,YACvB,CACEW,iBACAC,iBACAH,QACAI;QAEA,OAAOZ,kBAAkBS,gBAAgB,CACvCP,cACAC,QACAO,iBACAC,iBACAH,QACAI,WACAP;IAEJ,GACA;QAACH;QAAcC;QAAQE;KAAa;IAGtC,gCAAgC;IAChC,MAAMQ,gBAAgBd,YACpB,CAACS,QAAgBM;QACf,OAAOd,kBAAkBa,aAAa,CACpCX,cACAC,QACAC,aACAI,QACAM;IAEJ,GACA;QAACZ;QAAcC;QAAQC;KAAY;IAGrC,sBAAsB;IACtB,MAAMW,oBAAoBhB,YACxB;QACE,OAAOC,kBAAkBe,iBAAiB,CACxCb,cACAC,QACAC,aACAC;IAEJ,GACA;QAACH;QAAcC;QAAQC;QAAaC;KAAa;IAGnD,OAAO;QACLU;QACAT;QACAO;QACAJ;IACF;AACF"}