{"version":3,"sources":["../../../../src/features/commenting/hooks/useDocumentOperations.ts"],"sourcesContent":["'use client'\n\nimport type { LexicalEditor } from '@payloadcms/richtext-lexical/lexical'\n\nimport { useCallback, useEffect, useState } from 'react'\n\nimport type { DocumentOperationsResult } from '../types/hooks.js'\n\nimport { documentService } from '../services/documentService.js'\n\n/**\n * Hook for handling document operations\n * @param editor The Lexical editor instance\n * @param documentId The document ID\n * @returns Object with document state and operations\n */\nexport function useDocumentOperations(\n  editor: LexicalEditor,\n  documentId: string = 'default'\n): DocumentOperationsResult {\n  const [isDocumentSaved, setIsDocumentSaved] = useState(false)\n\n  // Check if the document exists in the database\n  const checkIfDocumentExists = useCallback(async () => {\n    return await documentService.checkIfDocumentExists(documentId)\n  }, [documentId])\n\n  // Function to save the document content\n  const saveDocument = useCallback(async () => {\n    const success = await documentService.saveDocument(editor, documentId)\n    if (success) {\n      setIsDocumentSaved(true)\n    }\n    return success\n  }, [documentId, editor])\n\n  // Check if document exists when component mounts\n  useEffect(() => {\n    checkIfDocumentExists().then(exists => {\n      setIsDocumentSaved(exists)\n    })\n  }, [checkIfDocumentExists])\n\n  return {\n    checkIfDocumentExists,\n    isDocumentSaved,\n    saveDocument,\n    setIsDocumentSaved,\n  }\n}\n"],"names":["useCallback","useEffect","useState","documentService","useDocumentOperations","editor","documentId","isDocumentSaved","setIsDocumentSaved","checkIfDocumentExists","saveDocument","success","then","exists"],"mappings":"AAAA;AAIA,SAASA,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,QAAO;AAIxD,SAASC,eAAe,QAAQ,iCAAgC;AAEhE;;;;;CAKC,GACD,OAAO,SAASC,sBACdC,MAAqB,EACrBC,aAAqB,SAAS;IAE9B,MAAM,CAACC,iBAAiBC,mBAAmB,GAAGN,SAAS;IAEvD,+CAA+C;IAC/C,MAAMO,wBAAwBT,YAAY;QACxC,OAAO,MAAMG,gBAAgBM,qBAAqB,CAACH;IACrD,GAAG;QAACA;KAAW;IAEf,wCAAwC;IACxC,MAAMI,eAAeV,YAAY;QAC/B,MAAMW,UAAU,MAAMR,gBAAgBO,YAAY,CAACL,QAAQC;QAC3D,IAAIK,SAAS;YACXH,mBAAmB;QACrB;QACA,OAAOG;IACT,GAAG;QAACL;QAAYD;KAAO;IAEvB,iDAAiD;IACjDJ,UAAU;QACRQ,wBAAwBG,IAAI,CAACC,CAAAA;YAC3BL,mBAAmBK;QACrB;IACF,GAAG;QAACJ;KAAsB;IAE1B,OAAO;QACLA;QACAF;QACAG;QACAF;IACF;AACF"}